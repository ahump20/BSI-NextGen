(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{8817:function(e,t,s){Promise.resolve().then(s.bind(s,1639))},2577:function(e,t,s){"use strict";var r=s(960);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},2762:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=s(1421)._(s(4804)).default.createContext(null)},1639:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(4980),l=s(4804),a=s(2577),n=s(86);function i(e){let{children:t,requiredRole:s,fallbackPath:i="/login"}=e,{user:o,loading:c,authenticated:d,login:m}=(0,n.a)(),u=(0,a.usePathname)();if((0,l.useEffect)(()=>{c||d||m(u)},[c,d,m,u]),c)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})});if(!d)return null;if(s&&o){let e={user:0,premium:1,admin:2};if(e[o.role]<e[s])return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-center mb-2",children:"Premium Feature"}),(0,r.jsxs)("p",{className:"text-gray-600 text-center mb-4",children:["This feature requires a ",s," account."]}),(0,r.jsxs)("div",{className:"space-y-2",children:["premium"===s&&(0,r.jsx)("a",{href:"/pricing",className:"block w-full bg-blue-600 text-white text-center py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Upgrade to Premium"}),(0,r.jsx)("a",{href:"/",className:"block w-full bg-gray-100 text-gray-700 text-center py-2 px-4 rounded hover:bg-gray-200 transition-colors",children:"Return Home"})]})]})})}return(0,r.jsx)(r.Fragment,{children:t})}var o=s(8229);function c(){let{user:e,logout:t}=(0,n.a)();return e?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Your Profile"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your account and subscription"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-32"}),(0,r.jsxs)("div",{className:"px-8 py-6 -mt-16",children:[(0,r.jsxs)("div",{className:"flex items-end mb-6",children:[(0,r.jsx)("div",{className:"border-4 border-white rounded-full shadow-lg",children:(0,r.jsx)(o.q,{src:e.picture,name:e.name||e.email,size:"lg"})}),(0,r.jsxs)("div",{className:"ml-4 mb-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e.name||"User"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.email})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Email Status"}),e.emailVerified?(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]}):(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Unverified"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Subscription"}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"premium"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"admin"===e.role?"Administrator":"premium"===e.role?"Premium":"Free"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"admin"===e.role?"Full platform access":"premium"===e.role?"All premium features unlocked":"Basic access"})]})]}),"user"===e.role&&(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsxs)("div",{className:"ml-4 flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unlock Premium Features"}),(0,r.jsxs)("ul",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("li",{className:"flex items-center text-sm text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Advanced predictive analytics"]}),(0,r.jsxs)("li",{className:"flex items-center text-sm text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Customizable team dashboards"]}),(0,r.jsxs)("li",{className:"flex items-center text-sm text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Real-time alerts and notifications"]}),(0,r.jsxs)("li",{className:"flex items-center text-sm text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Priority support"]})]}),(0,r.jsxs)("a",{href:"/pricing",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:["Upgrade to Premium",(0,r.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("button",{onClick:()=>{confirm("Are you sure you want to sign out?")&&t("/")},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-red-300",children:"Sign Out"}),(0,r.jsx)("a",{href:"/",className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 px-6 rounded-lg text-center shadow-md hover:shadow-lg transition-all duration-200",children:"Back to Dashboard"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Member Since"}),(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Recently"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Last Login"}),(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Today"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Account ID"}),(0,r.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})]}),(0,r.jsxs)("p",{className:"text-sm font-mono text-gray-600 truncate",children:[e.id.slice(0,12),"..."]})]})]})]})}):null}function d(){return(0,r.jsx)(i,{children:(0,r.jsx)(c,{})})}},8229:function(e,t,s){"use strict";s.d(t,{q:function(){return n}});var r=s(4980),l=s(728);let a={sm:"w-6 h-6 text-sm",md:"w-10 h-10 text-base",lg:"w-16 h-16 text-xl"};function n(e){let{src:t,name:s,size:n="sm",className:i=""}=e,o=a[n],c="rounded-full ".concat(o," ").concat(i);if(!t){let e=(s||"?")[0].toUpperCase();return(0,r.jsx)("div",{className:"".concat(c," bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center font-bold"),children:e})}return(0,r.jsx)("div",{className:"relative ".concat(o),children:(0,r.jsx)(l.default,{src:t,alt:s,fill:!0,className:"".concat(c," object-cover"),sizes:"sm"===n?"24px":"md"===n?"40px":"64px",priority:!1,unoptimized:t.includes("googleusercontent.com")||t.includes("auth0")})})}},86:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var r=s(4804);function l(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[a,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{l(!0),n(null);let e=await fetch("/api/auth/me",{credentials:"include"});if(401===e.status){t(null),l(!1);return}if(!e.ok)throw Error("Failed to fetch user");let s=await e.json();t(s.user)}catch(e){console.error("[useAuth] Error fetching user:",e),n(e instanceof Error?e.message:"Unknown error"),t(null)}finally{l(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{user:e,loading:s,error:a,authenticated:null!==e,login:(0,r.useCallback)(e=>{let t=new URLSearchParams;e&&t.append("returnTo",e);let s="/api/auth/login".concat(t.toString()?"?".concat(t.toString()):"");window.location.href=s},[]),logout:(0,r.useCallback)(e=>{let t=new URLSearchParams;e&&t.append("returnTo",e);let s="/api/auth/logout".concat(t.toString()?"?".concat(t.toString()):"");window.location.href=s},[]),refresh:i}}}},function(e){e.O(0,[728,543,586,744],function(){return e(e.s=8817)}),_N_E=e.O()}]);