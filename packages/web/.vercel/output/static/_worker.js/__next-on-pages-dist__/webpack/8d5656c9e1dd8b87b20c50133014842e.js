var l={},p=(g,f,y)=>(l.__chunk_7917=(h,t)=>{function o(r){return new Promise(e=>setTimeout(e,r))}async function c(r,e={},n=1e4){let s=new AbortController,a=setTimeout(()=>s.abort(),n);try{let u=await fetch(r,{...e,signal:s.signal});return clearTimeout(a),u}catch(u){throw clearTimeout(a),u instanceof Error&&u.name==="AbortError"?Error(`Request timeout after ${n}ms: ${r}`):u}}async function i(r,e=3,n=1e3){let s;for(let a=0;a<e;a++)try{return await r()}catch(u){if(s=u,a<e-1){let d=n*Math.pow(2,a);await o(d)}}throw s}Object.defineProperty(t,"__esModule",{value:!0}),t.formatChicagoTime=function(r){return(typeof r=="string"?new Date(r):r).toLocaleString("en-US",{timeZone:"America/Chicago",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},t.getChicagoTimestamp=function(){return new Date().toLocaleString("en-US",{timeZone:"America/Chicago",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},t.calculateWinPercentage=function(r,e){let n=r+e;return n===0?0:parseFloat((r/n).toFixed(3))},t.calculateGamesBack=function(r,e,n,s){return(n-r+(e-s))/2},t.validateApiKey=function(r,e){if(!r){if(process.env.NEXT_PHASE==="phase-production-build")return console.warn(`Warning: Missing API key for ${e}. Using placeholder for build.`),"placeholder-api-key-for-build";throw Error(`Missing API key for ${e}. Check environment variables.`)}return r},t.sleep=o,t.fetchWithTimeout=c,t.retryWithBackoff=i},l.__chunk_2872=(h,t)=>{var o;function c(i,r){return`${i}-${r}`}Object.defineProperty(t,"__esModule",{value:!0}),t.MMI_THRESHOLDS=t.MMI_WEIGHTS=t.BaseState=void 0,t.isMMIError=function(i){return typeof i=="object"&&i!==null&&"error"in i&&typeof i.error=="string"},t.isGameMMIResponse=function(i){return typeof i=="object"&&i!==null&&"game_id"in i&&"pitches"in i&&Array.isArray(i.pitches)},t.getMMICategory=function(i){return i>=t.MMI_THRESHOLDS.EXTREME?"Extreme":i>=t.MMI_THRESHOLDS.HIGH?"High":i>=t.MMI_THRESHOLDS.MODERATE?"Moderate":i>=t.MMI_THRESHOLDS.LOW?"Low":"Minimal"},t.getMMICategoryColor=function(i){return i>=t.MMI_THRESHOLDS.EXTREME?"text-red-600 bg-red-50":i>=t.MMI_THRESHOLDS.HIGH?"text-orange-600 bg-orange-50":i>=t.MMI_THRESHOLDS.MODERATE?"text-yellow-600 bg-yellow-50":i>=t.MMI_THRESHOLDS.LOW?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-50"},t.formatCount=c,t.getCountDescription=function(i,r){return i===3&&r===2?"Full count":i===3?`${i}-${r} (ball 4 possible)`:r===2?`${i}-${r} (K possible)`:c(i,r)},t.formatInning=function(i,r){let e=r?"Top":"Bottom";return i>9?`${e} ${i} (Extra Innings)`:`${e} ${i}`},function(i){i.EMPTY="___",i.FIRST="1__",i.SECOND="_2_",i.THIRD="__3",i.FIRST_SECOND="12_",i.FIRST_THIRD="1_3",i.SECOND_THIRD="_23",i.LOADED="123"}(o||(t.BaseState=o={})),t.MMI_WEIGHTS={LEVERAGE:.35,PRESSURE:.2,FATIGUE:.2,EXECUTION:.15,BIO_PROXIES:.1},t.MMI_THRESHOLDS={LOW:1,MODERATE:2,HIGH:3,EXTREME:4}},l.__chunk_8968=(h,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},l.__chunk_1011=(h,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},l.__chunk_6164=(h,t,o)=>{var c=Object.create?function(r,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,s,a)}:function(r,e,n,s){s===void 0&&(s=n),r[s]=e[n]},i=function(r,e){for(var n in r)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||c(e,r,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(o(8968),t),i(o(1011),t),i(o(2872),t),i(o(7917),t),i(o(1100),t)},l.__chunk_1100=(h,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getAnalytics=t.analytics=void 0;var c=o(66);Object.defineProperty(t,"analytics",{enumerable:!0,get:function(){return c.analytics}}),Object.defineProperty(t,"getAnalytics",{enumerable:!0,get:function(){return c.getAnalytics}});var i=o(66);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(i&&i.__esModule?i:{default:i}).default}})},l.__chunk_66=(h,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.analytics=t.getAnalytics=void 0;class c{constructor(){this.userId=null,this.eventQueue=[],this.performanceQueue=[],this.errorQueue=[],this.flushInterval=1e4,this.maxQueueSize=50,this.sessionId=this.generateSessionId(),this.isProduction=!1,this.session={sessionId:this.sessionId,startTime:Date.now(),lastActivity:Date.now(),pageViews:1,events:0},this.initializeProviders()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substring(7)}`}initializeProviders(){this.trackCoreWebVitals()}track(e,n){let s={name:e,properties:{...n,sessionId:this.sessionId,userId:this.userId||"anonymous",timestamp:Date.now()},timestamp:Date.now()};this.eventQueue.push(s),this.session.events++,this.session.lastActivity=Date.now(),this.eventQueue.length>=this.maxQueueSize&&this.flush(),this.isProduction||console.log("[Analytics]",e,n)}trackPerformance(e,n,s="ms"){let a={metric:e,value:n,unit:s,timestamp:Date.now()};this.performanceQueue.push(a),this.sendToAnalyticsEngine({metric:e,value:n,unit:s,sessionId:this.sessionId}),this.isProduction||console.log("[Performance]",e,n,s)}trackCoreWebVitals(){}measureAsyncOperation(e,n){let s=performance.now();return n().then(a=>{let u=performance.now()-s;return this.trackPerformance(e,u,"ms"),a}).catch(a=>{let u=performance.now()-s;throw this.trackPerformance(`${e}_error`,u,"ms"),this.trackError("error",`${e} failed`,a),a})}trackError(e,n,s){let a={type:e,message:n,stack:s?.stack,context:{sessionId:this.sessionId,userId:this.userId,url:"",userAgent:typeof navigator<"u"?navigator.userAgent:""},timestamp:Date.now()};this.errorQueue.push(a),e==="fatal"&&this.flush(),this.isProduction||console.error("[Analytics Error]",e,n,s)}trackPitchCreated(e,n){this.track("pitch_created",{pitchType:e,velocity:n.velocity||0,spinRate:n.spinRate||0,spinAxis:n.spinAxis||0})}trackSimulationAction(e){this.track("simulation_action",{action:e})}trackViewChange(e){this.track("view_change",{view:e})}trackMLBDataFetch(e,n){this.track("mlb_data_fetch",{success:e,pitcherId:n||"unknown"})}trackPitchComparison(e,n){this.track("pitch_comparison",{pitch1:e,pitch2:n})}trackExport(e){this.track("export",{format:e})}trackKeyboardShortcut(e){this.track("keyboard_shortcut",{shortcut:e})}identify(e,n){this.userId=e,this.session.userId=e,this.track("user_identified",{userId:e,...n})}async flush(){if(this.eventQueue.length===0&&this.performanceQueue.length===0&&this.errorQueue.length===0)return;let e={session:this.session,events:[...this.eventQueue],performance:[...this.performanceQueue],errors:[...this.errorQueue],timestamp:Date.now()};this.eventQueue=[],this.performanceQueue=[],this.errorQueue=[],await this.sendToAnalyticsEngine(e),await this.sendToExternalProviders(e)}async sendToAnalyticsEngine(e){if(this.isProduction)try{await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0})}catch(n){this.isProduction||console.error("Failed to send analytics:",n)}}async sendToExternalProviders(e){this.isProduction||console.log("[Analytics Flush]",e)}trackPageView(e){this.session.pageViews++,this.track("page_view",{path:e})}getSessionData(){return{...this.session}}updateSessionActivity(){this.session.lastActivity=Date.now()}}let i=null;t.getAnalytics=()=>(i||(i=new c),i),t.analytics={track:(r,e)=>(0,t.getAnalytics)().track(r,e),trackPerformance:(r,e,n)=>(0,t.getAnalytics)().trackPerformance(r,e,n),trackError:(r,e,n)=>(0,t.getAnalytics)().trackError(r,e,n),identify:(r,e)=>(0,t.getAnalytics)().identify(r,e),trackPitchCreated:(r,e)=>(0,t.getAnalytics)().trackPitchCreated(r,e),trackSimulationAction:r=>(0,t.getAnalytics)().trackSimulationAction(r),trackViewChange:r=>(0,t.getAnalytics)().trackViewChange(r),trackMLBDataFetch:(r,e)=>(0,t.getAnalytics)().trackMLBDataFetch(r,e),trackPitchComparison:(r,e)=>(0,t.getAnalytics)().trackPitchComparison(r,e),trackExport:r=>(0,t.getAnalytics)().trackExport(r),trackKeyboardShortcut:r=>(0,t.getAnalytics)().trackKeyboardShortcut(r),measureAsync:(r,e)=>(0,t.getAnalytics)().measureAsyncOperation(r,e)},t.default=t.analytics},l);export{p as __getNamedExports};
